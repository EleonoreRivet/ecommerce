<!DOCTYPE html >

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Espace Admin</title>
</h:head>
<h:body>

	<h1 style="color: red; text-align: center">Liste des produits</h1>
	<h:form>
		<p:dataTable var="p" value="#{sessionScope.pSession}" id="idTab">
			<p:column headerText="ID">
				<h:outputText value="#{p.id}" />
			</p:column>

			<p:column headerText="Photo">
				<h:graphicImage value="#{p.img}" />
			</p:column>

			<p:column headerText="Designation">
				<h:outputText value="#{p.designation}" />
			</p:column>

			<p:column headerText="Description">
				<h:outputText value="#{p.description}" />
			</p:column>
			
			<p:column headerText="Catégorie">
				<h:outputText value="#{p.categorie.nom}" />
			</p:column>
			
			<p:column headerText="Prix">
				<h:outputText value="#{p.prix}" />
			</p:column>

			<p:column headerText="Quantité">
				<h:outputText value="#{p.quantite}" />
			</p:column>
			
			<p:column headerText="Opérations">
				<p:commandLink value="Supprimer" action="#{pMB.supprPro}" update="idTab">
					<f:setPropertyActionListener value="#{p.id}"
						target="#{pMB.produit.id}" />
				</p:commandLink> | 
				<p:commandLink value="Modifier" action="modif">
					<f:setPropertyActionListener value="#{e}"
						target="#{eMB.etudiant}" />
				</p:commandLink>
			</p:column>
		</p:dataTable>
	</h:form>
	
	
		<h1 style="color: red; text-align: center">Ajouter un produit</h1>
	 <p:messages />
	<h:form enctype="multipart/form-data">
<h:panelGrid columns="3" styleClass="panelGridCenter">
<p:outputLabel value="Designation:" />
 <h:inputText value="#{pMB.produit.designation}" required="true"/>
		<br />
	<p:outputLabel value="Description:" />
 <h:inputText value="#{pMB.produit.description}" required="true"/>
		<br />
				<p:outputLabel value="Categorie:" />
		      <p:selectOneMenu id="categorie" value="#{pMB.categorie.id}" style="width:125px">
            <f:selectItem itemLabel="Selectionner une catégorie" itemValue="" />
           <f:selectItems value="#{sessionScope.cSession}" var="c" itemValue="#{c.id}" itemLabel="#{c.id}.Catégorie #{c.nom}"/>
        </p:selectOneMenu>
		<br />
		<p:outputLabel value="Prix:" />
 <h:inputText value="#{pMB.produit.prix}" />
		<br />
		<p:outputLabel value="Quantité:" />
<h:inputText value="#{pMB.produit.quantite}" />
		<br />
		<p:outputLabel value="Photo:" />
 <p:fileUpload value="#{pMB.image}" mode="simple" skinSimple="true"/>
		<br /><br />
		<h:commandButton value="Ajouter un produit" action="#{pMB.ajoutPro}" styleClass="bouton"/>
	</h:panelGrid>
	</h:form>
	
			<h1 style="color: red; text-align: center">Ajouter une catégorie</h1>
	 <p:messages />
	<h:form>
<h:panelGrid columns="3" styleClass="panelGridCenter">
<p:outputLabel value="Nom:" />
 <h:inputText value="#{cMB.categorie.nom}" required="true"/>
		<br />
	<p:outputLabel value="Description:" />
 <h:inputText value="#{cMB.categorie.description}" required="true"/>
		<br />
		<p:outputLabel value="Photo:" />
 <p:fileUpload value="#{cMB.produit.photo}" mode="simple" skinSimple="true"/>
		<br /><br />
		<h:commandButton value="Ajouter une catégorie" action="#{cMB.ajoutCat}" styleClass="bouton"/>
	</h:panelGrid>
	</h:form>
	
	
		<h1 style="color: red; text-align: center">Liste des catégories</h1>
	<h:form>
		<p:dataTable var="c" value="#{sessionScope.cSession}" id="idTab">
			<p:column headerText="ID">
				<h:outputText value="#{c.id}" />
			</p:column>

			<p:column headerText="Photo">
				<h:outputText value="#{c.photo}" />
			</p:column>

			<p:column headerText="Nom">
				<h:outputText value="#{c.nom}" />
			</p:column>

			<p:column headerText="Description">
				<h:outputText value="#{c.description}" />
			</p:column>
			
			<p:column headerText="Opérations">
				<p:commandLink value="Supprimer" action="#{cMB.supprCat}" update="idTab">
					<f:setPropertyActionListener value="#{p.id}"
						target="#{pMB.produit.id}" />
				</p:commandLink> | 
				<p:commandLink value="Modifier" action="modif">
					<f:setPropertyActionListener value="#{e}"
						target="#{eMB.etudiant}" />
				</p:commandLink>
			</p:column>
		</p:dataTable>
	</h:form>


</h:body>
</html>
